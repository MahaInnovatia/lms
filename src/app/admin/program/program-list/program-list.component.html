<section class="content">
  <div class="content-block">
    <div class="block-header" *ngFor="let breadscrum of breadscrums">
      <!-- breadcrumb -->
      <app-breadcrumb [title]="breadscrum.title" [items]="breadscrum.items" [active_item]="breadscrum.active">
      </app-breadcrumb>
    </div>
    <div class="row">
      <div class="col-md-12">
        <mat-tab-group>
          <mat-tab>
            <ng-template mat-tab-label>
              <i class="material-icons-two-tone psr-3">list_alt</i>
              List View
            </ng-template>
            <div class="row mt-4">
              <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="card">
                  <div class="materialTableHeader">
                    <div class="right">
                      <ul class="tbl-export-btn">
                        <li class="tbl-header-btn">
                          <div class="m-l-10" (click)="openFilterCard();" matTooltip="Filters">
                            <i id="filterIcon" class="material-icons" style="color: red; cursor: pointer;">filter_list</i>
                          </div>
                        </li>
                        <li>
                          <ul class="header-buttons-left ms-0">
                            <li class="tbl-search-box">
                              <label for="search-input"><i class="material-icons search-icon">search</i></label>
                              <input placeholder="Search" type="text" #filter class="browser-default search-field"
                                aria-label="Search box" [(ngModel)]="filterName" (input)="performSearch()">
                            </li>
                          </ul>
                        </li>
                          <li class="tbl-header-btn">
                            <div class="" matTooltip="ADD">
                              <button mat-raised-button id="submit" *ngIf="create" (click)="addNew()">Create</button>
                            </div>
                          </li>
                         
                          <li>
                            <span style="font-weight: bold;">Export as</span>
                          </li>
                          <li>
                            <div class="export-button m-l-10" matTooltip="XLSX">
                              <img src="assets/excel.svg" alt="" (click)="exportExcel()" />
                            </div>
                          </li>
                          <li>
                            <div class="export-button m-l-10" matTooltip="PDF">
                              <img src="assets/pdf (1).svg" alt="" (click)="generatePdf()" />
                            </div>
                          </li>
                        </ul>
                    </div>
                  </div>
                  <div class="body overflow-auto">
                    <div class="card" *ngIf="isFilter">
                      <div class="row m-3">
                        <div class="col-3 hide-on-mobile" >
                          <img src="assets/images/icons/filter.png" style="height: 80px; width: 80px;margin-top: 30px;">
                        </div>
                        <div class="col-9">
                          <form [formGroup]="filterForm">
                          <div class="row">
                          <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4">
                            <mat-form-field class="example-full-width mb-3"  appearance="outline">
                              <mat-label>Program</mat-label>
                              <mat-select (selectionChange)="onSelectionChange($event,'program')" formControlName ="program" multiple>
                                <mat-option *ngFor="let title of programList" [value]="title.title"> {{title.title | titlecase}} </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4">
                            <mat-form-field class="example-full-width mb-3"  appearance="outline">
                              <mat-label>Creator</mat-label>
                              <mat-select (selectionChange)="onSelectionChange($event,'creator')"  formControlName ="creator" multiple>
                                <mat-option *ngFor="let user of users" [value]="user.name"> {{user.name | titlecase}} </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <!-- <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4">
                          <mat-form-field class="example-full-width mb-3"   appearance="outline">
                            <mat-label>Vendor</mat-label>
                            <mat-select (selectionChange)="onSelectionChange($event,'vendor')" formControlName ="vendor"  multiple>
                              <mat-option *ngFor="let vendor of vendors" [value]="vendor.vendor"> {{vendor.vendor | titlecase}} </mat-option>
                            </mat-select>
                          </mat-form-field>
                          </div> -->
                          <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4">
                            <mat-form-field class="example-full-width mb-3" appearance="outline">
                              <mat-label>Status</mat-label>
                              <mat-select (selectionChange)="onSelectionChange($event,'status')"  formControlName ="status"  multiple>
                                <mat-option value="active"> Approved</mat-option>
                                <mat-option value="inactive"> Pending</mat-option>
                              </mat-select>
                            </mat-form-field>
                            </div>
                          <div class="col-8 mt-2 d-flex justify-content-end no-justify-mobile" >
                              <button mat-raised-button id="submit"(click)="applyFilter()">Apply</button>
                              <button mat-raised-button id="back"(click)="clearFilter()">Clear</button>
                          </div>
                        </div>
                      </form>
                        </div>
                      </div>
                    </div>
                    <div class="responsive_table">
                      <table mat-table [dataSource]="programData" matSort class="mat-cell advance-table">
                        <!-- <ng-container matColumnDef="select">
                          <mat-header-cell *matHeaderCellDef [ngClass]="'tbl-col-width-per-6'">
                            <mat-checkbox (change)="$event ? masterToggle() : null"
                              [checked]="selection.hasValue() && isAllSelected()"
                              [indeterminate]="selection.hasValue() && !isAllSelected()" [ngClass]="'tbl-checkbox'">
                            </mat-checkbox>
                          </mat-header-cell>
                          <mat-cell *matCellDef="let row" [ngClass]="'tbl-col-width-per-6'">
                            <mat-checkbox (click)="$event.stopPropagation()"
                              (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)"
                              [ngClass]="'tbl-checkbox'">
                            </mat-checkbox>
                          </mat-cell>
                        </ng-container> -->
                        <ng-container matColumnDef="program">
                          <mat-header-cell *matHeaderCellDef>Program
                          </mat-header-cell>
                          <mat-cell  *matCellDef="let row" 
                          (click)="view ? viewActiveProgram(row.id, row.status) : null"><span class="mobile-label">Program:</span>
                            <span [class.name]="isProgram">{{row.title |titlecase}}</span>
                          </mat-cell>
                        </ng-container>
                        <!-- <ng-container matColumnDef="program">
                          <mat-header-cell *matHeaderCellDef >Program</mat-header-cell>
                          <mat-cell class="isProgram" *matCellDef="let row" (click)="view ? viewInActiveProgram(row.id): null"><span
                              class="mobile-label">Program Name:</span> <span class=" col-cyan">{{row.title |titlecase}}</span>
                          </mat-cell>
                        </ng-container> -->
                        <ng-container matColumnDef="status">
                          <mat-header-cell *matHeaderCellDef class="pr-0">Status</mat-header-cell>
                          <mat-cell *matCellDef="let row" class="pr-0"><span
                            class="mobile-label">Status:</span>
                            <span
                              [class]="row?.status === 'active' ? 'badge badge-solid-green' : row?.status === 'inactive' ? 'badge badge-solid-red' : ''">
                              <span
                                [class]="row?.status === 'active' ? 'status-dot' : row?.status === 'inactive' ? 'status-red' : ''"></span>
                              {{row.status ==='active'? 'Approved':' Pending' | titlecase}}</span>
                          </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="code">
                          <mat-header-cell *matHeaderCellDef >Program Code
                          </mat-header-cell>
                          <mat-cell *matCellDef="let row" (click)="view ? viewActiveProgram(row.id, row.status) : null"><span
                              class="mobile-label">Program Code:</span> {{row.courseCode}}
                          </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="Creator">
                          <mat-header-cell *matHeaderCellDef >Creator</mat-header-cell>
                          <mat-cell *matCellDef="let row"  (click)="view ? viewActiveProgram(row.id, row.status) : null">
                            <span class="mobile-label">Creator:</span> <span  [class.name]="isCreator">{{row.creator}}</span>
                          </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="Duration">
                          <mat-header-cell *matHeaderCellDef >Duration
                          </mat-header-cell>
                          <mat-cell *matCellDef="let row"  (click)="view ? viewActiveProgram(row.id, row.status) : null">
                            <span class="mobile-label">Duration:</span>{{row.duration}} Hours</mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="Start Date">
                          <mat-header-cell *matHeaderCellDef >Start Date
                          </mat-header-cell>
                          <mat-cell *matCellDef="let row"  (click)="view ? viewActiveProgram(row.id, row.status) : null"> <span
                              class="mobile-label">Start Date:</span>{{row.sessionStartDate |date}}
                          </mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="End Date">
                          <mat-header-cell *matHeaderCellDef >End Date
                          </mat-header-cell>
                          <mat-cell *matCellDef="let row"   (click)="view ? viewActiveProgram(row.id, row.status) : null"> <span
                              class="mobile-label">End Date:</span>{{row.sessionEndDate |date}}
                          </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="Payment">
                          <mat-header-cell *matHeaderCellDef style="padding-left: 50px;">Fee
                          </mat-header-cell>
                          <mat-cell *matCellDef="let row" class="payment-cell"
                          (click)="view ? viewActiveProgram(row.id, row.status) : null"> <span
                              class="mobile-label">Fee:</span>$ {{row.courseFee}}.00
                          </mat-cell>
                        </ng-container>
                        <ng-container matColumnDef="Compulsory Count">
                          <mat-header-cell *matHeaderCellDef  class="compulsory-count-header"><span class="header-text">Compulsory Count</span>
                          </mat-header-cell>
                          <mat-cell *matCellDef="let row"  (click)="view ? viewActiveProgram(row.id, row.status) : null"> <span
                              class="mobile-label">Compulsory Count:</span>{{row.coreCourseCount}}
                          </mat-cell>
                        </ng-container> 
                        <ng-container matColumnDef="Elective Count">
                          <mat-header-cell *matHeaderCellDef >Elective Count
                          </mat-header-cell>
                          <mat-cell *matCellDef="let row"  (click)="view ? viewActiveProgram(row.id, row.status) : null"> <span
                              class="mobile-label">Elective Count:</span>{{row.electiveCourseCount}}
                          </mat-cell>
                        </ng-container>
                        <mat-header-row *matHeaderRowDef="displayedColumns">
                        </mat-header-row>
                        <mat-row *matRowDef="let row; columns: displayedColumns;" [style.cursor]="'pointer'" matRipple>
                        </mat-row>
                      </table>
                      <div *ngIf="!programData || programData.length === 0" class="text-center py-3 no-data-text">
                        No data found
                      </div>


                      <mat-paginator class="paginator rounded-5" #paginator [length]="totalItems"
                        (page)="pageSizeChange($event)" [pageSizeOptions]="pageSizeArr"
                        aria-label="select pagination option">
                      </mat-paginator>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </mat-tab>
          <mat-tab class="grid overflow-y">
            <ng-template mat-tab-label>
              <i class="material-icons-two-tone psr-3">grid_on</i>
              Grid View
            </ng-template>
            <div class="row mt-4">
              <div class="col-md-12">
                <div class="card">
                  <div class="materialTableHeader">
                    <div class="right">
                      <ul class="tbl-export-btn ">
                        <li>
                          <ul class="header-buttons-left ms-0">
                            <li class="tbl-search-box">
                              <label for="search-input"><i class="material-icons search-icon">search</i></label>
                              <input placeholder="Search" type="text" #filter class="browser-default search-field"
                                aria-label="Search box" [(ngModel)]="filterName" (input)="performSearch()">
                            </li>
                          </ul>
                        </li>
                        <li>
                          <ul class="tbl-export-btn">
                            <li class="tbl-header-btn">
                              <div class="m-l-10" matTooltip="ADD">
                                <button mat-raised-button id="submit" (click)="addNew()">Create</button>
                              </div>
                            </li>
                            <li>
                              <span style="font-weight: bold;">Export as</span>
                            </li>
                            <li>
                              <div class="export-button m-l-10" matTooltip="XLSX" (click)="exportExcel()">
                                <img src="assets/excel.svg" alt="" />
                              </div>
                            </li>
                            <li>
                              <div class="export-button m-l-10" matTooltip="PDF" (click)="generatePdf()">
                                <img src="assets/pdf (1).svg" alt="" />
                              </div>
                            </li>
                          </ul>
                        </li>
                        </ul>
                    </div>
                  </div>
                  <div class="body" *ngFor="let program of programData">
                      <div class="program-card" >
                        <div class="cards" >
                          <div class="row" >
                              <div class="col-xl-5 col-sm-12 " >
                            <div class="image-w" style="cursor: pointer;" (click)="viewActiveProgram(program.id, program.status)">
                              <img class="image-w mb-3" src="{{program?.image_link || 'assets/noimage.jpg'}}" >
                            </div>
                            </div>
                              <div class="col-xl-7 col-sm-12 m3">
                                <span class="text" style="cursor: pointer;"(click)="viewActiveProgram(program.id, program.status)"
                                >
                                  <h5>{{program?.title | truncate:35}}
                                  </h5>
                                  <div class="row">
                                    <div class="col-xl-7 col-sm-12" (click)="viewActiveProgram(program.id, program.status)" >
                                      <h6>Program Period</h6>
                                    </div>
                                    <div class="col-xl-5 col-sm-12">
                                      <p style="width: 160%;">{{program?.sessionStartDate |date }} -
                                        {{program?.sessionEndDate |date }} </p>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div class="col-xl-7 col-sm-12">
                                      <h6>Duration</h6>
                                    </div>
                                    <div class="col-xl-3 col-sm-12">
                                      <p style="width: 160%;">{{program?.duration}} Hours </p>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div class="col-xl-7 col-sm-12">
                                      <h6>Fee</h6>
                                    </div>
                                    <div class="col-xl-3 col-sm-12">
                                      <p>{{program?.courseFee}}$</p>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div class="col-xl-7 col-sm-12">
                                      <h6>Compulsory Courses</h6>
                                    </div>
                                    <div class="col-xl-3 col-sm-12">
                                      <p>{{program?.coreCourseCount}}</p>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <div class="col-xl-7 col-sm-12">
                                      <h6>Elective Courses</h6>
                                    </div>
                                    <div class="col-xl-3 col-sm-12">
                                      <p>{{program?.electiveCourseCount || 0}}</p>
                                    </div>
                                  </div>
                                </span>
                              </div>
                           
                          </div>
                          <div class="row" style="cursor: pointer;"
                          (click)="viewActiveProgram(program.id, program.status)">
                            <div class="col-xl-6 col-sm-12">
                              <div class="m-4">
                                <div class="row">
                                  <div class="col-xl-5 col-md-4 mt-3">
                                    <p class="fw-semibold" style="color: #979595">
                                      Compulsory Count
                                    </p>
                                  </div>
                                  <div class="col-xl-5 col-md-8 mt-3">
                                    <span class="ccount">{{program?.coreCourseCount}}</span>
                                  </div>
                                </div>
                                <div *ngFor="let core of program?.coreprogramCourse">
                                  <div class="row">
                                    <div class="col-xl-5 col-md-1 mt-3">
                                      <p class="fw-semibold" style="color: #979595;margin-right: 20px; flex: 0 0 auto;">
                                      Compulsory Course
                                      </p>
                                     
                                    </div>
                                    <div class="col-xl-7 col-md-12 mt-3">
                                      <span > {{core?.coreProgramName?.title}}</span>
                                    </div>
                                    <!-- <div class="col" >
                                      <p style="margin-left: 30px;"> {{core?.coreProgramName?.title}}</p>
                                    </div> -->
                                  </div>

                                  <div class="row">
                                    <div class="col-xl-5 col-md-12">
                                      <p class="fw-semibold fs-6" style="color: #979595">Description</p>
                                    </div>
                                    <div class="col-xl-7 col-md-12" >
                                      <p [innerHTML]="core?.coreProgramDescription | truncate:20">
                                      </p>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="col count" *ngIf="program?.electiveCourseCount > 0">
                              <div class="m-4">
                                <div class="d-flex flex-wrap justify-content-between mt-4">
                                  <p class="fw-semibold" style="color: #979595">
                                    Elective Count
                                    <span class="ecount">
                                      {{program?.electiveCourseCount}}</span>
                                  </p>
                                </div>
                                <div *ngFor="let elective of program?.electiveprogramCourse">
                                  <div class="row">
                                    <!-- <div class="col-3"> -->
                                      <div class="d-flex flex-wrap justify-content-start align-items-center mt-3">
                                      <p class="fw-semibold" style="color: #979595; margin-right: 20px; flex: 0 0 auto;">Elective Course</p>
                                      <p style="margin-top: -3px;">{{elective?.electiveProgramName?.title}}</p>
                                    </div>
                                    <!-- <div class="col">
                                      <p style="margin-left: 0px;">{{elective?.electiveProgramName?.title}}</p>
                                    </div> -->
                                  </div>
                                  <div class="row">
                                    <div class="col-xl-3 col-md-12">
                                      <p class="fw-semibold fs-6" style="color: #979595">Description</p>
                                    </div>
                                    <div class="col" style="margin-left: 15px;">
                                      <p
                                        [innerHTML]="elective?.electiveProgramDescription | truncate:20">
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                  </div>

                  <mat-paginator class="paginator rounded-5" #paginator [length]="totalItems"
                    (page)="pageSizeChange($event)" [pageSizeOptions]="pageSizeArr"
                    aria-label="select pagination option">
                  </mat-paginator>
                </div>
              </div>
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>
    </div>
  </div>
</section>
